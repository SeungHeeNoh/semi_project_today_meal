<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM
"http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="getReceiptListCount">
		SELECT
			   COUNT(*)
		  FROM RECEIPT
		 WHERE USER_NO = ?
		   AND SALE_DATE BETWEEN ADD_MONTHS(SYSDATE,-1) AND SYSDATE
	</entry>
	<entry key="getDailyReceiptListCount">
		SELECT
			   COUNT(*)
		  FROM RECEIPT
		 WHERE USER_NO = ?
		   AND TO_CHAR(SALE_DATE, 'YYYYMMDD') BETWEEN ? AND ?
	</entry>
	<entry key="getMonthlyReceiptListCount">
		SELECT
			   COUNT(*)
		  FROM RECEIPT
		 WHERE USER_NO = ?
		   AND TO_CHAR(SALE_DATE, 'YYYYMMDD') BETWEEN  TO_CHAR(TO_DATE(?, 'YYYYMM'), 'YYYYMMDD') AND TO_CHAR(LAST_DAY(TO_DATE(?, 'YYYYMM')), 'YYYYMMDD')
	</entry>
	<entry key="selectRecentReceiptList">
		SELECT
		       RANK
		     , ROWNUM
		     , ORDER_COUNT
		     , OPTION_YN
		     , OPT_COUNT
		     , ORDER_NO
		     , SALE_DATE
		     , ORDER_SUM
		     , PRODUCT_NO
		     , ORDER_STATE_NO
		     , CATEGORY_NAME
		     , PRODUCT_NAME
		     , PRODUCT_IMG
		     , PRODUCT_QTY
		     , OPTION_NAME
		     , OPTION_QTY
		  FROM(SELECT
		       DENSE_RANK() OVER (ORDER BY RLIST.ORDER_NO DESC) RANK
		     , RLIST.*
		  FROM (SELECT
		       SR.ORDER_COUNT
		     , PB.OPTION_YN
		     , OC.OPT_COUNT
		     , R.ORDER_NO
		     , R.SALE_DATE
		     , R.ORDER_SUM
		     , R.PRODUCT_NO
		     , R.ORDER_STATE_NO
		     , PC.CATEGORY_NAME
		     , P.PRODUCT_NAME
		     , P.PRODUCT_IMG
		     , PB.QUANTITY PRODUCT_QTY
		     , O.OPTION_NAME
		     , OB.QUANTITY OPTION_QTY
		  FROM RECEIPT R
		  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
		  JOIN OPTION_BUY OB ON(R.ORDER_NO = OB.ORDER_NO)
		  JOIN PRODUCT P ON(PB.PRODUCT_NO = P.PRODUCT_NO)
		  JOIN PRODUCT_CATEGORY PC ON(P.CATEGORY_NO = PC.CATEGORY_NO)
		  JOIN OPT O ON(OB.OPTION_NO = O.OPTION_NO)
		  JOIN OPTION_TYPE OT ON(O.OPTION_TYPE_NO = OT.OPTION_TYPE_NO)
		  JOIN (SELECT
		       PB.ORDER_NO
		     , COUNT(PB.ORDER_NO) ORDER_COUNT
		  FROM RECEIPT R
		  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
		 WHERE USER_NO = ?
		   AND SALE_DATE BETWEEN ADD_MONTHS(SYSDATE,-1) AND SYSDATE
		 GROUP BY PB.ORDER_NO) SR ON(SR.ORDER_NO = R.ORDER_NO)
		  JOIN (SELECT
		       ORDER_NO
		     , PRODUCT_NO
		     , COUNT(PRODUCT_NO) OPT_COUNT
		  FROM OPTION_BUY
		 GROUP BY ORDER_NO, PRODUCT_NO
		 ORDER BY ORDER_NO DESC) OC ON (R.ORDER_NO = OC.ORDER_NO)
		   AND (P.PRODUCT_NO = OC.PRODUCT_NO)
		 WHERE USER_NO = ?
		   AND SALE_DATE BETWEEN ADD_MONTHS(SYSDATE,-1) AND SYSDATE
		   AND P.PRODUCT_NO = OT.PRODUCT_NO
		 ORDER BY R.ORDER_NO DESC, P.PRODUCT_NAME DESC) RLIST)
		 WHERE RANK BETWEEN ? AND ?
 
 
	</entry>
	
	
	<entry key="selectRecentReceiptList2">
		SELECT
		       RANK
		     , ROWNUM
		     , ORDER_COUNT
		     , OPTION_YN
		     , OPT_COUNT
		     , ORDER_NO
		     , SALE_DATE
		     , ORDER_SUM
		     , PRODUCT_NO
		     , ORDER_STATE_NO
		     , CATEGORY_NAME
		     , PRODUCT_NAME
		     , PRODUCT_IMG
		     , PRODUCT_QTY
		     , OPTION_NAME
		     , OPTION_QTY
		  FROM(SELECT
		       DENSE_RANK() OVER (ORDER BY RLIST.ORDER_NO DESC) RANK
		     , RLIST.*
		  FROM (SELECT
		               CC.ORDER_COUNT
		             , PB.OPTION_YN
		             , CC.OPT_COUNT
				     , R.ORDER_NO
				     , R.SALE_DATE
				     , R.ORDER_SUM
				     , R.PRODUCT_NO
				     , R.ORDER_STATE_NO
				     , PC.CATEGORY_NAME
				     , P.PRODUCT_NAME
				     , P.PRODUCT_IMG
				     , PB.QUANTITY PRODUCT_QTY
		             , OO.OPTION_NAME
		             , CC.QUANTITY OPTION_QTY
				  FROM RECEIPT R
				  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
				  JOIN PRODUCT P ON(PB.PRODUCT_NO = P.PRODUCT_NO)
				  JOIN PRODUCT_CATEGORY PC ON(P.CATEGORY_NO = PC.CATEGORY_NO)
		          JOIN(SELECT
		       SR.ORDER_NO
		     , SR.ORDER_COUNT
		     , OC.OPT_COUNT
		     , OC.QUANTITY
		     , OC.OPTION_NO
		  FROM (SELECT
				       PB.ORDER_NO
		             , PB.PRODUCT_NO  
				     , COUNT(PB.ORDER_NO) ORDER_COUNT
				  FROM RECEIPT R
				  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
				 WHERE USER_NO = ?
				   AND SALE_DATE BETWEEN ADD_MONTHS(SYSDATE,-1) AND SYSDATE
				 GROUP BY PB.ORDER_NO, PB.PRODUCT_NO) SR
		  LEFT JOIN (SELECT
				       ORDER_NO
				     , PRODUCT_NO
				     , COUNT(PRODUCT_NO) OPT_COUNT
		             , QUANTITY
		             , OPTION_NO
				  FROM OPTION_BUY
				 GROUP BY ORDER_NO, PRODUCT_NO, QUANTITY, OPTION_NO
				 ORDER BY ORDER_NO DESC) OC ON(SR.ORDER_NO = OC.ORDER_NO)
		         AND (SR.PRODUCT_NO = OC.PRODUCT_NO)) CC ON(CC.ORDER_NO = R.ORDER_NO)
		 LEFT JOIN OPT OO ON(OO.OPTION_NO = CC.OPTION_NO)) RLIST)
		 WHERE RANK BETWEEN ? AND ?
 
	</entry>
	<entry key="selectDailyReceiptList">
		SELECT
		       RANK
		     , ROWNUM
		     , ORDER_COUNT
		     , OPTION_YN
		     , OPT_COUNT
		     , ORDER_NO
		     , SALE_DATE
		     , ORDER_SUM
		     , PRODUCT_NO
		     , ORDER_STATE_NO
		     , CATEGORY_NAME
		     , PRODUCT_NAME
		     , PRODUCT_IMG
		     , PRODUCT_QTY
		     , OPTION_NAME
		     , OPTION_QTY
		  FROM(SELECT
		       DENSE_RANK() OVER (ORDER BY RLIST.ORDER_NO DESC) RANK
		     , RLIST.*
		  FROM (SELECT
		       SR.ORDER_COUNT
		     , PB.OPTION_YN
		     , OC.OPT_COUNT
		     , R.ORDER_NO
		     , R.SALE_DATE
		     , R.ORDER_SUM
		     , R.PRODUCT_NO
		     , R.ORDER_STATE_NO
		     , PC.CATEGORY_NAME
		     , P.PRODUCT_NAME
		     , P.PRODUCT_IMG
		     , PB.QUANTITY PRODUCT_QTY
		     , O.OPTION_NAME
		     , OB.QUANTITY OPTION_QTY
		  FROM RECEIPT R
		  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
		  JOIN OPTION_BUY OB ON(R.ORDER_NO = OB.ORDER_NO)
		  JOIN PRODUCT P ON(PB.PRODUCT_NO = P.PRODUCT_NO)
		  JOIN PRODUCT_CATEGORY PC ON(P.CATEGORY_NO = PC.CATEGORY_NO)
		  JOIN OPT O ON(OB.OPTION_NO = O.OPTION_NO)
		  JOIN OPTION_TYPE OT ON(O.OPTION_TYPE_NO = OT.OPTION_TYPE_NO)
		  JOIN (SELECT
		       PB.ORDER_NO
		     , COUNT(PB.ORDER_NO) ORDER_COUNT
		  FROM RECEIPT R
		  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
		 WHERE USER_NO = ?
		   AND SALE_DATE BETWEEN ? AND ?
		 GROUP BY PB.ORDER_NO) SR ON(SR.ORDER_NO = R.ORDER_NO)
		  JOIN (SELECT
		       ORDER_NO
		     , PRODUCT_NO
		     , COUNT(PRODUCT_NO) OPT_COUNT
		  FROM OPTION_BUY
		 GROUP BY ORDER_NO, PRODUCT_NO
		 ORDER BY ORDER_NO DESC) OC ON (R.ORDER_NO = OC.ORDER_NO)
		   AND (P.PRODUCT_NO = OC.PRODUCT_NO)
		 WHERE USER_NO = ?
		   AND SALE_DATE BETWEEN ? AND ?
		   AND P.PRODUCT_NO = OT.PRODUCT_NO
		 ORDER BY R.ORDER_NO DESC, P.PRODUCT_NAME DESC) RLIST)
		 WHERE RANK BETWEEN ? AND ?
	</entry>
	<entry key="selectDailyReceiptList2">
		SELECT
		       RANK
		     , ROWNUM
		     , ORDER_COUNT
		     , OPTION_YN
		     , OPT_COUNT
		     , ORDER_NO
		     , SALE_DATE
		     , ORDER_SUM
		     , PRODUCT_NO
		     , ORDER_STATE_NO
		     , CATEGORY_NAME
		     , PRODUCT_NAME
		     , PRODUCT_IMG
		     , PRODUCT_QTY
		     , OPTION_NAME
		     , OPTION_QTY
		  FROM(SELECT
		       DENSE_RANK() OVER (ORDER BY RLIST.ORDER_NO DESC) RANK
		     , RLIST.*
		  FROM (SELECT
		               CC.ORDER_COUNT
		             , PB.OPTION_YN
		             , CC.OPT_COUNT
				     , R.ORDER_NO
				     , R.SALE_DATE
				     , R.ORDER_SUM
				     , R.PRODUCT_NO
				     , R.ORDER_STATE_NO
				     , PC.CATEGORY_NAME
				     , P.PRODUCT_NAME
				     , P.PRODUCT_IMG
				     , PB.QUANTITY PRODUCT_QTY
		             , OO.OPTION_NAME
		             , CC.QUANTITY OPTION_QTY
				  FROM RECEIPT R
				  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
				  JOIN PRODUCT P ON(PB.PRODUCT_NO = P.PRODUCT_NO)
				  JOIN PRODUCT_CATEGORY PC ON(P.CATEGORY_NO = PC.CATEGORY_NO)
		          JOIN(SELECT
		       SR.ORDER_NO
		     , SR.ORDER_COUNT
		     , OC.OPT_COUNT
		     , OC.QUANTITY
		     , OC.OPTION_NO
		  FROM (SELECT
				       PB.ORDER_NO
		             , PB.PRODUCT_NO  
				     , COUNT(PB.ORDER_NO) ORDER_COUNT
				  FROM RECEIPT R
				  JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
				 WHERE USER_NO = ?
				   AND SALE_DATE BETWEEN ? AND ?
				 GROUP BY PB.ORDER_NO, PB.PRODUCT_NO) SR
		  LEFT JOIN (SELECT
				       ORDER_NO
				     , PRODUCT_NO
				     , COUNT(PRODUCT_NO) OPT_COUNT
		             , QUANTITY
		             , OPTION_NO
				  FROM OPTION_BUY
				 GROUP BY ORDER_NO, PRODUCT_NO, QUANTITY, OPTION_NO
				 ORDER BY ORDER_NO DESC) OC ON(SR.ORDER_NO = OC.ORDER_NO)
		         AND (SR.PRODUCT_NO = OC.PRODUCT_NO)) CC ON(CC.ORDER_NO = R.ORDER_NO)
		 LEFT JOIN OPT OO ON(OO.OPTION_NO = CC.OPTION_NO)) RLIST)
		 WHERE RANK BETWEEN ? AND ?
	</entry>
	<entry key="selectMonthlyReceiptList">
		SELECT
			   ORDER_NO
			 , SALE_DATE
			 , COIN
			 , DELIVERY_DATE
			 , ORDER_SUM
			 , USER_NO
			 , PRODUCT_NO
			 , ORDER_STATE_NO
		  FROM RECEIPT
		 WHERE USER_NO = ?
		   AND TO_CHAR(SALE_DATE, 'YYYYMMDD') BETWEEN  TO_CHAR(TO_DATE(?, 'YYYYMM'), 'YYYYMMDD') AND TO_CHAR(LAST_DAY(TO_DATE(?, 'YYYYMM')), 'YYYYMMDD')
	</entry>
	<entry key="selectDailySalesAnalysistList">
		SELECT
		       T.SALE_DATE
		     , T.SALE_DAY
		     , T.COUNT_SALES
		     , T.TOTAL_SALES
		     , NVL(T.TOTAL_SALES, 0) - NVL(C.CANCEL_SALES, 0) - NVL(R.RETURN_SALES, 0) ACTUAL_SALES
		     , NVL(C.CANCEL_SALES, 0) CANCEL_SALES
		     , NVL(R.RETURN_SALES, 0) RETURN_SALES
		  FROM (SELECT
				       TO_CHAR(SALE_DATE, 'YYYYMMDD') SALE_DATE
				     , TO_CHAR(SALE_DATE, 'DY') SALE_DAY
				     , COUNT(*) COUNT_SALES
				     , SUM(ORDER_SUM) TOTAL_SALES
				  FROM RECEIPT
				 WHERE TO_CHAR(SALE_DATE, 'YYYYMMDD') BETWEEN ? AND ?
				 GROUP BY TO_CHAR(SALE_DATE, 'YYYYMMDD'), TO_CHAR(SALE_DATE, 'DY')) T
		 LEFT JOIN (SELECT
					       TO_CHAR(SALE_DATE, 'YYYYMMDD') SALE_DATE
					     , SUM(ORDER_SUM) CANCEL_SALES
					  FROM RECEIPT
					 WHERE TO_CHAR(SALE_DATE, 'YYYYMMDD') BETWEEN ? AND ?
					   AND ORDER_STATE_NO = 2
					 GROUP BY TO_CHAR(SALE_DATE, 'YYYYMMDD')) C ON(T.SALE_DATE = C.SALE_DATE)
		 LEFT JOIN (SELECT
					       TO_CHAR(SALE_DATE, 'YYYYMMDD') SALE_DATE
					     , SUM(ORDER_SUM) RETURN_SALES
					  FROM RECEIPT
					 WHERE TO_CHAR(SALE_DATE, 'YYYYMMDD') BETWEEN ? AND ?
					   AND ORDER_STATE_NO = 3
					 GROUP BY TO_CHAR(SALE_DATE, 'YYYYMMDD')) R ON(T.SALE_DATE = R.SALE_DATE)
		ORDER BY T.SALE_DATE DESC
	</entry>
	<entry key="selectMonthlySalesAnalysistList">
		SELECT
		       T.SALE_DATE
		     , T.COUNT_SALES
		     , T.TOTAL_SALES
		     , NVL(T.TOTAL_SALES, 0) - NVL(C.CANCEL_SALES, 0) - NVL(R.RETURN_SALES, 0) ACTUAL_SALES
		     , NVL(C.CANCEL_SALES, 0) CANCEL_SALES
		     , NVL(R.RETURN_SALES, 0) RETURN_SALES
		  FROM (SELECT
				       TO_CHAR(SALE_DATE, 'YYYYMM') SALE_DATE
				     , COUNT(*) COUNT_SALES
				     , SUM(ORDER_SUM) TOTAL_SALES
				  FROM RECEIPT
				 WHERE TO_CHAR(SALE_DATE, 'YYYYMM') BETWEEN ? AND ?
				 GROUP BY TO_CHAR(SALE_DATE, 'YYYYMM')) T
		 LEFT JOIN (SELECT
					       TO_CHAR(SALE_DATE, 'YYYYMM') SALE_DATE
					     , SUM(ORDER_SUM) CANCEL_SALES
					  FROM RECEIPT
					 WHERE TO_CHAR(SALE_DATE, 'YYYYMM') BETWEEN ? AND ?
					   AND ORDER_STATE_NO = 2
					 GROUP BY TO_CHAR(SALE_DATE, 'YYYYMM')) C ON(T.SALE_DATE = C.SALE_DATE)
		 LEFT JOIN (SELECT
					       TO_CHAR(SALE_DATE, 'YYYYMM') SALE_DATE
					     , SUM(ORDER_SUM) RETURN_SALES
					  FROM RECEIPT
					 WHERE TO_CHAR(SALE_DATE, 'YYYYMM') BETWEEN ? AND ?
					   AND ORDER_STATE_NO = 3
					 GROUP BY TO_CHAR(SALE_DATE, 'YYYYMM')) R ON(T.SALE_DATE = R.SALE_DATE)
		 ORDER BY T.SALE_DATE DESC
	</entry>
	<entry key="selectRankingTop5">
		SELECT
		       RANKING
		     , CATEGORY_NAME
		     , PRODUCT_NAME
		     , PRODUCT_IMG
		     , QUANTITY
		     , TOTAL
		  FROM (SELECT
				       RANK() OVER (ORDER BY P.PRODUCT_PRICE * PQ.QUANTITY DESC) RANKING
				     , PC.CATEGORY_NAME
				     , P.PRODUCT_NAME
				     , P.PRODUCT_IMG
				     , PQ.QUANTITY
				     , P.PRODUCT_PRICE * PQ.QUANTITY TOTAL
				  FROM PRODUCT P
				  JOIN PRODUCT_CATEGORY PC ON(P.CATEGORY_NO = PC.CATEGORY_NO)
		  JOIN (SELECT
		               PB.PRODUCT_NO
		             , COUNT(*) QUANTITY
		          FROM RECEIPT R
		          JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
		          JOIN PRODUCT P ON(PB.PRODUCT_NO = P.PRODUCT_NO)
		         WHERE SALE_DATE BETWEEN ADD_MONTHS(SYSDATE,-6) AND SYSDATE
		         GROUP BY PB.PRODUCT_NO) PQ ON(PQ.PRODUCT_NO = P.PRODUCT_NO)
		 ORDER BY RANKING ASC)
		 WHERE RANKING BETWEEN 1 AND 5
	</entry>
	<entry key="selectRankingTop5Ver2">
		SELECT
		       RANKING
		     , CATEGORY_NAME
		     , PRODUCT_NAME
		     , PRODUCT_IMG
		     , QUANTITY
		     , TOTAL
		  FROM (SELECT
				       RANK() OVER (ORDER BY P.PRODUCT_PRICE * PQ.QUANTITY DESC) RANKING
				     , PC.CATEGORY_NAME
				     , P.PRODUCT_NAME
				     , P.PRODUCT_IMG
				     , PQ.QUANTITY
				     , P.PRODUCT_PRICE * PQ.QUANTITY TOTAL
				  FROM PRODUCT P
				  JOIN PRODUCT_CATEGORY PC ON(P.CATEGORY_NO = PC.CATEGORY_NO)
		  JOIN (SELECT
		               PB.PRODUCT_NO
		             , QUANTITY
		          FROM RECEIPT R
		          JOIN PRODUCT_BUY PB ON(R.ORDER_NO = PB.ORDER_NO)
		          JOIN PRODUCT P ON(PB.PRODUCT_NO = P.PRODUCT_NO)
		         WHERE SALE_DATE BETWEEN ADD_MONTHS(SYSDATE,-6) AND SYSDATE
		         GROUP BY PB.PRODUCT_NO, QUANTITY) PQ ON(PQ.PRODUCT_NO = P.PRODUCT_NO)
		 ORDER BY RANKING ASC)
		 WHERE RANKING BETWEEN 1 AND 5
	</entry>
</properties>